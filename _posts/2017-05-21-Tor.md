# Tor

`[*] 이 페이지는 공개용이 아닌 개인 공부를 위해 사용됩니다.`

보통 인터넷을 사용하면 패킷을 통해 source와 destination이 남는다. 이런 정보를 은닉할 수 있는, 즉 익명으로 인터넷 서비스를 사용할 수 있는
어플리케이션 `tor`가 있다.
토르는 The Orion Routing의 약자이다. 1995년에 처음 제안된 암호화 프로토콜인 어니언 라우팅은 많은 지원을 통해 오픈소스인 토르로 
출시 되었다.

어니언 라우팅은 쉽게 설명하자면 데이터와 송수신측의 익명성을 지키기 위해 트래픽을 암호화된 레이어에 숨기는 것이다. 토르의 기본 구조는 통신 경로 중간에 다른 중간 지점을 추가하는 것이다. 통신할때 다양한 릴레이를 거치고 해당 릴레이에는 출구 외엔 어떠한 정보나 로그를 남기지 않는 구조로 이루어져서 익명성이 보장된다. 
릴레이란 릴레이 기능을 할 수 있는 컴퓨터를 의미한다. 릴레이는 어느 정도 대역폭을 희생해도 좋다는 자원 봉사자들이 운영하고 있다. 

토르는 크게 3개의 릴레이를 거쳐 이용하게 된다. 릴레이 3개는 특정 역할을 맡는데, 먼저 시작 부분인 Gaurd Relay와 중간 트레픽을 중계하는 Middle Relay 그리고 Exit Relay이다. 미들 릴레이는 중간에 릴레이를 배치함으로써 가드와 출구 릴레이가 서로의 정보를 알 수 없게 만든다. 출구 릴레이는 말그대로 토르 시스템을 빠져나가는 릴레이로 이를 통해 최종 목적지로 트래픽을 보낸다.

토르 네트워크는 릴레이들이 서로를 신뢰하지 않는 구조로 이루어져 있다. 이를 3중 암호화를 통해 각 릴레이의 익명성을 보장하였다. 첫번째 암호화는 토르 사용자와 출구 릴레이가 풀 수 있는 키로 암호화를 한다. 1차로 암호화된 데이터에 중간 릴레이만 해독할 수 있도록 암호화한다. 그리고 마지막으로 가드 릴레이가 해독할 수 있게 암호화 한다. 이렇게 양파 같이 겹겹히 암호화를 시킨다고 하여 어니언 라우팅이라 한다. 